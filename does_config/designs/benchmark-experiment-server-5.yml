server_experiment_5:
  n_repetitions: 1
  host_types:
    hserv1:
      n: 1
      check_status: True
      init_roles:
        - ml-example-setup-1
        - setup-poetry
      $CMD$:
        - "bash {{exp_code_dir}}/utils/experiment-runner.sh \"{{exp_code_dir}}\" 0 2.0"
    hserv2:
      n: 4
      check_status: True
      init_roles:
        - ml-example-setup-1
        - setup-poetry
      $CMD$:
        - "bash {{exp_code_dir}}/utils/experiment-runner.sh \"{{exp_code_dir}}\" 1 2.0"
        - "bash {{exp_code_dir}}/utils/experiment-runner.sh \"{{exp_code_dir}}\" 2 2.0"
        - "bash {{exp_code_dir}}/utils/experiment-runner.sh \"{{exp_code_dir}}\" 3 2.0"
        - "bash {{exp_code_dir}}/utils/experiment-runner.sh \"{{exp_code_dir}}\" 4 2.0"

  base_experiment:
    mpc:
      player_count: 5
      player_0_hostname: "[% exp_host_lst | json_query(\"[?host_type=='hserv1'].private_dns_name\") | first %]"
      abs_path_to_code_dir: "{{exp_code_dir}}"
      script_name: "auditing_function_benchmark_script_v2"
      script_args: 
        $FACTOR$: [
          ["1e-3", 38, 5, "[-1]"],
        ]
      protocol_setup: "shamir_semi_honest_n"
      input_file_name: "mnist-audit-conv-10epoch.zip"




$ETL$:
  small_experiment_1_raw:
    experiments: [server_experiment_5]
    extractors:
      MpSpdzStderrExtractor:  {}
      MpSpdzResultExtractor: {}
      IgnoreExtractor: {}
    transformers: []
    loaders:
      CsvSummaryLoader:
        output_dir: etl_results
